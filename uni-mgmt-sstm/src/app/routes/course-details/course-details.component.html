<div class="flex h-screen bg-gray-100">
  <app-sidebar></app-sidebar>

  <div
    class="min-h-screen w-6xl mx-auto items-center mx-auto bg-gray-100 py-10 px-4"
  >
    <div
      *ngIf="singleCourse"
      class="max-w-2xl mx-auto mt-10 p-6 bg-gray-100 rounded-2xl shadow-lg border border-gray-200"
    >
      <h1 class="text-3xl font-bold text-blue-700 mb-6 text-center">
        ðŸ“š Course Details
      </h1>

      <div class="space-y-4 text-gray-700 text-base">
        <p>
          <span class="font-semibold text-gray-800">Course ID:</span>
          {{ singleCourse.COURSE_ID }}
        </p>
        <p>
          <span class="font-semibold text-gray-800">Course Name:</span>
          {{ singleCourse.COURSE_NAME }}
        </p>
        <p>
          <span class="font-semibold text-gray-800">Course Description: </span>
          {{ singleCourse.COURSE_DESC }}
        </p>
        <p>
          <span class="font-semibold text-gray-800">Course Teacher:</span>
          <ng-container
            *ngIf="singleCourse.COURSE_TEACHER?.length; else noTeacher"
          >
            <ng-container
              *ngFor="
                let teacher of singleCourse.COURSE_TEACHER;
                let isLast = last
              "
            >
              {{ getTeacherNameById(teacher.id)
              }}<span *ngIf="!isLast">, </span>
            </ng-container>
          </ng-container>
          <ng-template #noTeacher>No teacher assigned</ng-template>
        </p>

        <p>
          <span class="font-semibold text-gray-800">Course Students:</span>
          <ng-container
            *ngFor="
              let student of singleCourse.COURSE_STUDENTS;
              let isLast = last
            "
          >
            {{ getStudentNameById(student.studentId)
            }}<span *ngIf="!isLast">, </span>
          </ng-container>
        </p>
      </div>
      <button (click)="toggleEditForm()" class="mt-4 flex justify-center">
        <a
          class="px-6 py-2 rounded-lg font-medium transition bg-blue-600 text-white hover:bg-blue-700"
          >Edit Course Details</a
        >
      </button>
    </div>

    <form
      *ngIf="showEditForm"
      class="flex flex-col items-center mt-8"
      #editForm="ngForm"
      (ngSubmit)="updateCourse(editForm.value)"
    >
      <h1 class="text-3xl font-bold text-blue-700 mb-6 text-center">
        Edit Course Details
      </h1>

      <label for="course_id" class="mb-2 text-gray-600 text-lg"
        >Edit Course ID:</label
      >
      <input
        type="text"
        name="COURSE_ID"
        id="course_id"
        [ngModel]="singleCourse.COURSE_ID"
        ngModel
        class="w-[40%] border border-gray-300 rounded-lg p-2 mb-1 focus:outline-none focus:ring-2 focus:ring-blue-500"
      />

      <label for="course_name" class="mb-2 text-gray-600 text-lg"
        >Edit Course Name:</label
      >
      <input
        type="text"
        name="COURSE_NAME"
        id="course_name"
        [ngModel]="singleCourse.COURSE_NAME"
        ngModel
        class="w-[40%] border border-gray-300 rounded-lg p-2 mb-1 focus:outline-none focus:ring-2 focus:ring-blue-500"
      />

      <label for="course_desc" class="mb-2 text-gray-600 text-lg"
        >Edit Course Description:</label
      >
      <input
        type="text"
        name="COURSE_DESC"
        id="course_description"
        [ngModel]="singleCourse.COURSE_DESC"
        ngModel
        class="w-[40%] border border-gray-300 rounded-lg p-2 mb-1 focus:outline-none focus:ring-2 focus:ring-blue-500"
      />

      <label for="course_teacher" class="mb-2 text-gray-600 text-lg">
        Edit Course Teacher:
      </label>
      <select
        name="COURSE_TEACHER"
        id="course_teacher"
        [(ngModel)]="singleCourse.COURSE_TEACHER"
        class="w-[40%] border border-gray-300 rounded-lg p-2 mb-1 focus:outline-none focus:ring-2 focus:ring-blue-500"
      >
        <option
          *ngFor="let teacher of teachersList"
          [ngValue]="[{ id: teacher.id }]"
        >
          {{ teacher.USER_NAME }}
        </option>
      </select>

      <label for="course_students" hidden class="mb-2 text-gray-600 text-lg">
        Edit Course Students:
      </label>
      <select
        hidden
        name="COURSE_STUDENTS"
        id="course_students"
        multiple
        [(ngModel)]="singleCourse.COURSE_STUDENTS"
        class="w-[40%] border border-gray-300 rounded-lg p-2 mb-1 focus:outline-none focus:ring-2 focus:ring-blue-500"
      >
        <option
          *ngFor="let student of studentsList"
          [value]="student.USER_NAME"
        >
          {{ student.USER_NAME }}
        </option>
      </select>

      <button
        type="submit"
        class="mt-6 px-6 py-2 rounded-lg font-medium bg-blue-600 text-white hover:bg-blue-700"
      >
        Submit
      </button>
    </form>
  </div>
</div>
