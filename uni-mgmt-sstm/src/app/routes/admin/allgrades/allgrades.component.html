<div class="flex h-screen bg-gray-100">
  <app-sidebar></app-sidebar>
  <main class="flex-1 overflow-y-auto p-6">
    <div class="bg-white max-w-4xl mx-auto p-6 rounded-lg shadow-md">
      <h2 class="text-2xl flex justify-between items-center font-bold mb-6 text-blue-800">
        All Students Grades
        <div class="text-xl">
          <button
            (click)="downloadGradesPDF()"
            class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg shadow-md transition duration-200"
          >
            Download PDF
          </button>
        </div>
      </h2>

      <div *ngIf="groupedGrades && getStudentIds().length > 0; else noGrades">
        <div *ngFor="let studentId of getStudentIds()">
          <h3 class="text-xl font-semibold mb-2 text-green-700">
            ğŸ‘¨â€ğŸ“ {{ getStudentName(studentId) }}
          </h3>

          <div class="overflow-auto border rounded-md">
            <table class="min-w-full divide-y divide-gray-200">
              <thead class="bg-gray-100">
                <tr>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase"
                  >
                    Course ID
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase"
                  >
                    Title
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase"
                  >
                    Type
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase"
                  >
                    Date
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase"
                  >
                    Marks
                  </th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-100">
                <tr *ngFor="let grade of groupedGrades[studentId]">
                  <td class="px-6 py-4 text-sm text-gray-800">
                    {{ getCourseName(grade.courseId) }}
                  </td>

                  <td class="px-6 py-4 text-sm text-gray-800">
                    {{ grade.title }}
                  </td>
                  <td class="px-6 py-4 text-sm text-gray-800">
                    {{ grade.type }}
                  </td>
                  <td class="px-6 py-4 text-sm text-gray-600">
                    {{ grade.date }}
                  </td>
                  <td class="px-6 py-4 font-semibold text-green-700">
                    {{ grade.marks }}
                  </td>
                </tr>
                <tr class="bg-gray-50 font-semibold">
                  <td colspan="4" class="px-6 py-3 text-right">Total Marks:</td>
                  <td class="px-6 py-3 text-green-700">
                    {{ getTotalMarks(groupedGrades[studentId]) }}
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <ng-template #noGrades>
        <p class="text-gray-500">No grades available.</p>
      </ng-template>
    </div>

    <router-outlet></router-outlet>
  </main>
</div>
